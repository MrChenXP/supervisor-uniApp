<template>
	<view class="kw-editor">
		<view class="kw-content">
			<textarea class="kw-content-textarea" :value="content.content" @blur="changeEditor" maxlength="4000"></textarea>
		</view>
		<view class="kw-image">
		</view>	
  </view>
</template>

<script>
  export default {
		name: 'editor',
		components:{},
		data () {
			return {
				// content: []
			}
		},
    props:{
      content: {
				type: Object,
				default () {
					return {
						content: '',
						images: []
					}
				}
			}
    },
		methods:{
			addImage () {
				this.$kwz.uploadImage({
				},{
					url: 'ueditor/jsp/controller.jsp?action=uploadimage',
					success (image, tempImage) {
						if (image && image.url) {
							this.content.images.push({
								type: 'image',
								content: this.$kwz.ajax.url(image.url),
								imageUrl : image.url
							})
						}
					}
				}, this)
			},
			removeImage (index) {
// 				let contentLength = this.content.length;
// 				let content = []
// 				for (let i = 0 ;i < contentLength; i++) {
// 					if (i < (index - 1) || i > index + 1) {
// 						content.push(this.content[i])
// 					} else {
// 						if (this.content[index -1].type == 'textarea' && this.content[index + 1].type == 'textarea') {
// 							this.content[index -1].content += this.content[index + 1].content
// 							content.push(this.content[index -1])
// 						} else {
// 							content.push(this.content[index -1])
// 							content.push(this.content[index +1])
// 						}
// 						i += 2
// 					}
// 				}
// 				this.content = content
			},
			addVideo () {
			},
			changeEditor (e) {
				this.content.content = e.detail.value
			}
		}
  }
</script>

<style lang="scss">
  .kw-editor{
    position: relative;
    width: 100%;
    height: 600upx;
    border:#dddddd solid 1upx;
    display: flex;
    flex-direction: column;
  }
	.kw-content{
		.kw-content-textarea{
			padding: 8upx;
			border-bottom:#dddddd solid 1upx;
			height: 450upx;
			width: 100%
		}
	}
  
</style>
